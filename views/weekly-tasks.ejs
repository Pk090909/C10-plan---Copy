<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <title>Weekly Tasks</title>
</head>
<body>
    <header class="container-fluid py-3 bg-dark text-light text-center">
        <h1>Weekly Tasks</h1>
    </header>
    <main class="container my-4">
        <h2>Your Weekly Tasks</h2>
        <% if (tasks.length > 0) { %>
            <ul class="list-group">
                <% tasks.forEach((task) => { %>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <strong><%= task.title %></strong> - <%= task.dueDate ? task.dueDate.toLocaleDateString() : 'No due date' %>
                            <br>
                            <% if (task.isCompleted) { %>
                                <span class="badge bg-success">Completed</span>
                            <% } else { %>
                                <span class="badge bg-warning">Pending</span>
                            <% } %>
                        </div>
                        <div>
                            <% if (!task.isCompleted) { %>
                                <form action="/weekly-tasks/complete/<%= task._id %>" method="POST" style="display:inline;">
                                    <button type="submit" class="btn btn-sm btn-primary">Complete</button>
                                </form>
                            <% } %>
                            <form action="/weekly-tasks/delete/<%= task._id %>" method="POST" style="display:inline;">
                                <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                            </form>
                        </div>
                    </li>
                <% }) %>
            </ul>
        <% } else { %>
            <p>No weekly tasks found!</p>
        <% } %>
    </main>
    <footer class="mt-auto py-3 text-center bg-light">
        <p>&copy; 2024 Study Planner</p>
    </footer>
</body>
</html>
